
Set-PSReadLineOption -EditMode Emacs

$LOCAL_PROFILE = "$(Split-Path -Parent $PROFILE)\Microsoft.PowerShell_local_profile.ps1"

# Source local profile
if (Test-Path -Path $LOCAL_PROFILE -PathType Leaf) {
    . $LOCAL_PROFILE
}

Set-Alias -Name unzip -Value Expand-Archive


# Functions

function la {
    ls -Force
}

function configg {
    vim $PROFILE
    . $PROFILE
}

function configa {
    vim $LOCAL_PROFILE
    . $PROFILE
}

function touch($file) {
    "" | Out-File $file -Encoding ASCII
}

function which($name) {
    Get-Command $name | Select-Object -ExpandProperty Definition
}

function grep($regex, $dir) {
    if ($dir) {
        Get-ChildItem $dir | select-string $regex
    } else {
        $input | select-string $regex
    }
}

function head {
    cat @Args | Select -First 10
}

function tail {
    cat @Args | Select -Last 10
}

function du($path) {
    $size = (Get-ChildItem -Recurse $path | Measure-Object -Property Length -sum).sum
    if ($size / 1KB -lt 1) {
        "{0:N0}B" -f $size
    } elseif ($size / 1MB -lt 1) {
        "{0:N2}KB" -f ($size / 1KB)
    } elseif ($size / 1GB -lt 1) {
        "{0:N2}MB" -f ($size / 1MB)
    } else {
        "{0:N2}GB" -f ($size / 1GB)
    }
}

function td {
    vim ~\.cache\ToDo
}